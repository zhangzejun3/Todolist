{"version":3,"sources":["TodoInput.js","TodoItem.js","SignUpForm.js","SignInForm.js","SignInOrSignUp.js","ForgetPasswordForm.js","leanCloud.js","UserDialog.js","App.js","index.js"],"names":["TodoInput","this","input","focus","_this","react_default","a","createElement","type","value","props","content","onKeyPress","submit","bind","onChange","changeTitle","ref","placeholder","e","key","onSubmit","Component","TodoItem","className","checked","todo","status","toggle","title","onClick","delete","onToggle","onDelete","SignUpForm","formData","email","username","password","SignInForm","href","SignInOrSignUp","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","selected","setState","target","SignInForm_SignInForm","onSignIn","SignUpForm_SignUpForm","onSignUp","ForgetPasswordForm","AV","init","appId","appKey","getCurrentUser","user","User","current","getUserFormAVUser","AVUser","objectSpread","id","attributes","UserDialog","selectedTab","_this2","preventDefault","_this$state$formData","successFn","errorFn","logIn","then","loggedInUser","error","signIn","code","alert","_this3","_this$state$formData2","setUsername","setPassword","setEmail","signUp","stateCopy","JSON","parse","stringify","SignInOrSignUp_SignInOrSignUp","changeFormData","showForgetPassword","ForgetPasswordForm_ForgetPasswordForm","resetPassword","returnToSignIn","requestPasswordReset","success","console","log","App","newTodo","todoList","todos","filter","item","deleted","map","index","src_TodoItem","onSignOut","src_TodoInput","addTodo","src_UserDialog_0","onSignUpOrSignIn","logOut","event","push","length","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.f4255fe9.chunk.js","sourcesContent":["import React,{Component} from 'react'\n\nclass TodoInput extends Component{\n    componentDidMount(){\n        this.input.focus()\n    }\n    componentDidUpdate(){\n        this.input.focus()\n    }\n    render(){\n        return(\n            <input type='text' value={this.props.content}\n            onKeyPress={this.submit.bind(this)}\n            onChange={this.changeTitle.bind(this)}\n            ref={(input)=>{this.input = input}}\n            placeholder='在此输入'/>\n        )\n    }\n    submit(e){\n        if(e.key ==='Enter'){\n            this.props.onSubmit(e)       \n        }\n    }\n    changeTitle(e){\n        this.props.onChange(e)\n    }\n}\n\nexport default TodoInput","import React, { Component } from 'react'\n\nclass TodoItem extends Component {\n    render() {\n        return (\n            <div className=\"itemWrapper\">\n                <input type=\"checkbox\" \n                checked={this.props.todo.status === 'completed'}\n                    onChange={this.toggle.bind(this)} />\n                <span>{this.props.todo.title}</span>\n                <button onClick={this.delete.bind(this)}>删除</button>\n            </div>\n        )\n    }\n    toggle(e){\n        this.props.onToggle(e,this.props.todo)\n    }\n    delete(e){\n        this.props.onDelete(e,this.props.todo)\n    }\n}\n\nexport default TodoItem\n","import React, { Component } from 'react'\r\n\r\nexport default class SignUpForm extends Component{\r\n    render(){\r\n        return(\r\n            <form className='signUp' onSubmit={this.props.onSubmit.bind(this)}>\r\n            <div className=\"row\">\r\n                <input placeholder='邮箱' type=\"text\" \r\n                value={this.props.formData.email}\r\n                onChange={this.props.onChange.bind(this,'email')}/>\r\n            </div>\r\n            <div className=\"row\">\r\n                <input placeholder='用户名' type=\"text\" \r\n                value={this.props.formData.username}\r\n                onChange={this.props.onChange.bind(this,'username')}/>\r\n            </div>\r\n            <div className=\"row\">\r\n                <input  placeholder='密码' type=\"password\" \r\n                value={this.props.formData.password}\r\n                onChange={this.props.onChange.bind(this,'password')}/>\r\n            </div>\r\n            <div className=\"row actions\">\r\n                <button type='submit'>注册</button>\r\n            </div>\r\n        </form>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\n\r\nexport default class SignInForm extends Component{\r\n    render(){\r\n        return(\r\n            <form className='signIn' onSubmit={this.props.onSubmit.bind(this)}>\r\n            <div className=\"row\">\r\n                <input placeholder='用户名' type=\"text\" value={this.props.formData.username}\r\n                onChange={this.props.onChange.bind(this,'username')}/>\r\n            </div>\r\n            <div className=\"row\">\r\n                <input placeholder='密码' type=\"password\" value={this.props.formData.password}\r\n                onChange={this.props.onChange.bind(this,'password')}/>\r\n            </div>\r\n            <div className=\"row actions\">\r\n                <button type='submit'>登录</button>\r\n                <div className=\"forgetPasswordWrapper clearfix\">\r\n                <a href=\"#\" onClick={this.props.onClick.bind(this)}>忘记密码</a>\r\n                </div>\r\n            </div>\r\n        </form>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport SignUpForm from './SignUpForm'\r\nimport SignInForm from './SignInForm'\r\n\r\nexport default class SignInOrSignUp extends Component{\r\n    constructor(){\r\n        super()\r\n        this.state={\r\n            selected:'signIn'\r\n        }\r\n    }\r\n    toggle(e) {\r\n        this.setState({\r\n            selected: e.target.value\r\n        })\r\n    }\r\n    render(){\r\n        return(\r\n            <div className=\"signInOrSignUp\">\r\n                <h1>Welcome</h1>\r\n                <div className=\"formWrapper\">\r\n                    {this.state.selected === 'signIn' \r\n                    ? <SignInForm formData={this.props.formData}\r\n                    onSubmit={this.props.onSignIn.bind(this)}\r\n                    onChange={this.props.onChange.bind(this)}\r\n                    onClick={this.props.onClick.bind(this)}/>\r\n                    : <SignUpForm formData={this.props.formData}\r\n                    onSubmit={this.props.onSignUp.bind(this)}\r\n                    onChange={this.props.onChange.bind(this)}/>}\r\n                </div>\r\n                <footer className='clearfix'>\r\n                    <button value='signUp'\r\n                        onClick={this.toggle.bind(this)}>注册</button>\r\n                    <button value='signIn'\r\n                        onClick={this.toggle.bind(this)}>登录</button>\r\n                </footer>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\n\r\nexport default class ForgetPasswordForm extends Component{\r\n    render(){\r\n        return(\r\n            <div className=\"forgetPassword\">\r\n                <h3>重置密码</h3>\r\n                <form className=\"forgetPasswordForm\" onSubmit={this.props.onSubmit.bind(this)}>\r\n                    <div className=\"row\">\r\n                        <input type=\"text\" value={this.props.formData.email}\r\n                            placeholder='邮箱'\r\n                            onChange={this.props.onChange.bind(this, 'email')} />\r\n                    </div>\r\n                    <div className=\"row actions\">\r\n                        <button type='submit'>发送重置邮件</button>\r\n                        <a href=\"#\" onClick={this.props.onClick.bind(this)}>返回登录</a>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}","import AV from 'leancloud-storage'\r\n\r\nvar APP_ID = 'rrfsGl7WT9nC6eSI9EsKgf98-gzGzoHsz';\r\nvar APP_KEY = 'zoP5Iwsm3ugh9FwLRhweO8jq';\r\n\r\nAV.init({\r\n  appId: APP_ID,\r\n  appKey: APP_KEY\r\n});\r\n\r\nexport default AV\r\nexport function signUp(email,username,password,successFn,errorFn){\r\n  // 新建 AVUser 对象实例\r\n  var user = new AV.User();\r\n  // 设置用户名\r\n  user.setUsername(username||'');\r\n  // 设置密码\r\n  user.setPassword(password||'');\r\n  // 设置邮箱\r\n  user.setEmail(email||'');\r\n  user.signUp().then(function (loggedInUser) {\r\n    let user = getUserFormAVUser(loggedInUser)\r\n    successFn.call(null,user)\r\n  }, function (error) {\r\n    errorFn.call(null,error)\r\n  });\r\n  return undefined\r\n}\r\nexport function signIn(username,password,successFn,errorFn){\r\n  AV.User.logIn(username, password).then(function (loggedInUser) {\r\n    let user = getUserFormAVUser(loggedInUser)\r\n    successFn.call(null,user)\r\n  }, function (error) {\r\n    errorFn.call(null,error)\r\n  });\r\n}\r\nexport function signOut(){\r\n  AV.User.logOut()\r\n  return undefined\r\n}\r\nexport function getCurrentUser(){\r\n  let user = AV.User.current()\r\n  if(user){\r\n    return getUserFormAVUser(user)\r\n  }else{\r\n    return null\r\n  }\r\n}\r\n\r\nexport function sendPasswordResetEmail(email,successFn,errorFn){\r\n  AV.User.requestPasswordReset(email).then(function (success) {\r\n    alert('发送成功')\r\n    successFn.call()\r\n  }, function (error) {\r\n    console.log(error.code)\r\n    switch (error.code) {\r\n      case 1:\r\n        alert('请不要往同一个邮件地址发送太多邮件')\r\n        break\r\n      case 204:\r\n        alert('没有提供电子邮箱地址')\r\n        break\r\n      case 205:\r\n        alert('找不到电子邮箱地址对应的用户')\r\n        break\r\n      default:\r\n        alert(error)\r\n        break\r\n    }\r\n    errorFn.call(null,error)\r\n  });\r\n}\r\n\r\nfunction getUserFormAVUser(AVUser){\r\n  return {\r\n    id : AVUser.id,\r\n    ...AVUser.attributes\r\n\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport './UserDialog.css'\r\nimport SignInOrSignUp from './SignInOrSignUp'\r\nimport ForgetPasswordForm from './ForgetPasswordForm'\r\nimport {signUp,signIn,sendPasswordResetEmail} from './leanCloud'\r\n\r\nclass UserDialog extends Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            selectedTab:'signInOrSignUp',\r\n            formData:{\r\n                email:'',\r\n                username:'',\r\n                password:''\r\n            }\r\n        }\r\n    }\r\n    signIn(e){\r\n        e.preventDefault()\r\n        let {username,password} = this.state.formData\r\n        let success = (user)=>{\r\n            this.props.onSignIn.call(null,user)\r\n        }\r\n        let error = (error)=>{\r\n            switch (error.code) {\r\n                case 210:\r\n                    alert('用户名与密码不匹配')\r\n                    break\r\n                case 201:\r\n                    alert('密码为空')\r\n                    break\r\n                case 200:\r\n                    alert('用户名为空')\r\n                    break\r\n                case 211:\r\n                    alert('请输入正确的用户名和密码')\r\n                    break\r\n                default:\r\n                    alert(error)\r\n                    break\r\n            }\r\n        }\r\n        signIn(username,password,success,error)\r\n    }\r\n    signUp(e){\r\n        e.preventDefault()\r\n        let {email,username,password} = this.state.formData\r\n        let success = (user)=>{\r\n            this.props.onSignUp.call(null,user)\r\n        }\r\n        let error = (error)=>{\r\n            if(username===''){\r\n                alert('用户名为空')\r\n            }else if(password===''){\r\n                alert('密码为空')\r\n            }\r\n            switch(error.code){\r\n                case 202:\r\n                alert('用户名已被占用')\r\n                break\r\n                case 203:\r\n                alert('邮箱已被占用')\r\n                break\r\n                case 125:\r\n                alert('电子邮箱地址无效')\r\n                break\r\n                default:\r\n                alert(error)\r\n                break\r\n            }\r\n        }\r\n        signUp(email,username,password,success,error)\r\n    }\r\n    changeFormData(key,e){\r\n        let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n        stateCopy.formData[key] = e.target.value\r\n        this.setState(stateCopy)\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"UserDialogWrapper\">\r\n                <div className=\"UserDialog\">\r\n                    {this.state.selectedTab==='signInOrSignUp'\r\n                    ?<SignInOrSignUp formData={this.state.formData}\r\n                    onSignIn={this.signIn.bind(this)}\r\n                    onSignUp={this.signUp.bind(this)}\r\n                    onChange={this.changeFormData.bind(this)}\r\n                    onClick={this.showForgetPassword.bind(this)}/>\r\n                    :<ForgetPasswordForm formData={this.state.formData}\r\n                    onSubmit={this.resetPassword.bind(this)}\r\n                    onChange={this.changeFormData.bind(this)}\r\n                    onClick={this.returnToSignIn.bind(this)}/>}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    showForgetPassword(){\r\n        let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n        stateCopy.selectedTab = 'forgetPassword'\r\n        this.setState(stateCopy)\r\n    }\r\n    resetPassword(e){\r\n        e.preventDefault()\r\n        sendPasswordResetEmail(this.state.formData.email)\r\n    }\r\n    returnToSignIn(e){\r\n        e.preventDefault()\r\n        let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n        stateCopy.selectedTab = 'signInOrSignUp'\r\n        this.setState(stateCopy)\r\n    }\r\n}\r\n\r\nexport default UserDialog","import React, { Component } from 'react'\nimport './App.css'\nimport 'normalize.css'\nimport './reset.css'\nimport TodoInput from './TodoInput'\nimport TodoItem from './TodoItem'\nimport UserDialog from './UserDialog'\nimport { getCurrentUser, signOut } from './leanCloud';\n\nclass App extends Component {\n    constructor() {\n        super()\n        this.state = {\n            user: getCurrentUser || {},\n            newTodo: '',\n            todoList: []\n        }\n    }\n    render() {\n        let todos = this.state.todoList\n            .filter((item) => !item.deleted)\n            .map((item, index) => {\n                return <TodoItem todo={item} key={index}\n                    onToggle={this.toggle.bind(this)}\n                    onDelete={this.delete.bind(this)} />\n            })\n        return (\n            <div className='App'>\n                <h1>{this.state.user.username || '我'}的Todos\n                {this.state.user.id ?\n                        <button onClick={this.onSignOut.bind(this)}>登出</button> : null}</h1>\n                <div className=\"inputWrapper\">\n                    <TodoInput content={this.state.newTodo}\n                        onSubmit={this.addTodo.bind(this)}\n                        onChange={(this.changeTitle.bind(this))} />\n                </div>\n                <ol>\n                    {todos}\n                </ol>\n                {this.state.user.id ? null : <UserDialog\n                    onSignUp={this.onSignUpOrSignIn.bind(this)}\n                    onSignIn={this.onSignUpOrSignIn.bind(this)} />}\n            </div>\n        )\n    }\n\n    onSignUpOrSignIn(user) {\n        // this.state.user = user\n        // this.setState(this.state)\n        //直接修改会报错\n        let stateCopy = JSON.parse(JSON.stringify(this.state))\n        stateCopy.user = user\n        this.setState(stateCopy)\n    }\n    onSignOut() {\n        signOut()\n        let stateCopy = JSON.parse(JSON.stringify(this.state))\n        stateCopy.user = {}\n        this.setState(stateCopy)\n    }\n    delete(event, todo) {\n        todo.deleted = true\n        this.setState(this.state)\n    }\n    toggle(e, todo) {\n        todo.status = todo.status === 'completed' ? '' : 'completed'\n        this.setState(this.state)\n    }\n    addTodo(event) {\n        let todoList = this.state.todoList\n        todoList.push({\n            id: idMaker(),\n            title: event.target.value,\n            status: null,\n            deleted: false\n        })\n        this.setState({\n            newTodo: '',\n            todoList: todoList\n        })\n        console.log(todoList[todoList.length - 1].title)\n    }\n    changeTitle(event) {\n        this.setState({\n            newTodo: event.target.value,\n            todoList: this.state.todoList\n        })\n    }\n}\n\nlet id = 0\nfunction idMaker() {\n    id += 1\n    return id\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}