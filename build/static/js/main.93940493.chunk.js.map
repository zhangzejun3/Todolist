{"version":3,"sources":["TodoInput.js","TodoItem.js","leanCloud.js","UserDialog.js","App.js","index.js"],"names":["TodoInput","this","input","focus","_this","react_default","a","createElement","type","value","props","content","onKeyPress","submit","bind","onChange","changeTitle","ref","placeholder","e","key","onSubmit","Component","TodoItem","className","checked","todo","status","toggle","title","onClick","delete","onToggle","onDelete","AV","init","appId","appKey","getCurrentUser","user","User","current","getUserFormAVUser","AVUser","Object","objectSpread","id","attributes","UserDialog","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","selected","formData","username","password","setState","target","_this2","preventDefault","_this$state$formData","successFn","errorFn","logIn","then","loggedInUser","error","signIn","onSignIn","alert","_this3","_this$state$formData2","setUsername","setPassword","signUp","onSignUp","stateCopy","JSON","parse","stringify","signUpForm","changeFormData","signInForm","App","newTodo","todoList","todos","filter","item","deleted","map","index","src_TodoItem","src_TodoInput","addTodo","src_UserDialog_0","event","push","console","log","length","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"uSA4BeA,iNAxBPC,KAAKC,MAAMC,qDAGXF,KAAKC,MAAMC,yCAEP,IAAAC,EAAAH,KACJ,OACII,EAAAC,EAAAC,cAAA,SAAOC,KAAK,OAAOC,MAAOR,KAAKS,MAAMC,QACrCC,WAAYX,KAAKY,OAAOC,KAAKb,MAC7Bc,SAAUd,KAAKe,YAAYF,KAAKb,MAChCgB,IAAK,SAACf,GAASE,EAAKF,MAAQA,GAC5BgB,YAAY,4DAGbC,GACS,UAATA,EAAEC,KACDnB,KAAKS,MAAMW,SAASF,uCAGhBA,GACRlB,KAAKS,MAAMK,SAASI,UAtBJG,cCoBTC,mLAlBP,OACIlB,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,eACXnB,EAAAC,EAAAC,cAAA,SAAOC,KAAK,WACZiB,QAAoC,cAA3BxB,KAAKS,MAAMgB,KAAKC,OACrBZ,SAAUd,KAAK2B,OAAOd,KAAKb,QAC/BI,EAAAC,EAAAC,cAAA,YAAON,KAAKS,MAAMgB,KAAKG,OACvBxB,EAAAC,EAAAC,cAAA,UAAQuB,QAAS7B,KAAK8B,OAAOjB,KAAKb,OAAlC,gDAILkB,GACHlB,KAAKS,MAAMsB,SAASb,EAAElB,KAAKS,MAAMgB,qCAE9BP,GACHlB,KAAKS,MAAMuB,SAASd,EAAElB,KAAKS,MAAMgB,aAhBlBJ,4CCGvBY,IAAGC,KAAK,CACNC,MAJW,oCAKXC,OAJY,6BAOCH,EAAf,EA2BO,SAASI,IACd,IAAIC,EAAOL,IAAGM,KAAKC,UACnB,OAAGF,EACMG,EAAkBH,GAElB,KAIX,SAASG,EAAkBC,GACzB,OAAOC,OAAAC,EAAA,EAAAD,CAAA,CACLE,GAAKH,EAAOG,IACTH,EAAOI,gBCmDCC,cA/FX,SAAAA,IAAc,IAAA5C,EAAA,OAAAwC,OAAAK,EAAA,EAAAL,CAAA3C,KAAA+C,IACV5C,EAAAwC,OAAAM,EAAA,EAAAN,CAAA3C,KAAA2C,OAAAO,EAAA,EAAAP,CAAAI,GAAAI,KAAAnD,QACKoD,MAAQ,CACTC,SAAU,SACVC,SAAS,CACLC,SAAS,GACTC,SAAS,KANPrD,sEAUPe,GACHlB,KAAKyD,SAAS,CACVJ,SAAUnC,EAAEwC,OAAOlD,uCAGpBU,GAAE,IAAAyC,EAAA3D,KACLkB,EAAE0C,iBADG,IAAAC,EAEqB7D,KAAKoD,MAAME,UDMtC,SAAgBC,EAASC,EAASM,EAAUC,GACjD9B,IAAGM,KAAKyB,MAAMT,EAAUC,GAAUS,KAAK,SAAUC,GAC/C,IAAI5B,EAAOG,EAAkByB,GAC7BJ,EAAUX,KAAK,KAAKb,IACnB,SAAU6B,GACXJ,EAAQZ,KAAK,KAAKgB,KCJdC,CATKP,EAEAN,SAFAM,EAESL,SACA,SAAClB,GACXqB,EAAKlD,MAAM4D,SAASlB,KAAK,KAAKb,IAEtB,SAAC6B,GACTG,MAAMH,oCAIPjD,GAAE,IAAAqD,EAAAvE,KACLkB,EAAE0C,iBADG,IAAAY,EAEqBxE,KAAKoD,MAAME,UDtBtC,SAAgBC,EAASC,EAASM,EAAUC,GAEjD,IAAIzB,EAAO,IAAIL,IAAGM,KAElBD,EAAKmC,YAAYlB,GAEjBjB,EAAKoC,YAAYlB,GAGjBlB,EAAKqC,SAASV,KAAK,SAAUC,GAC3B,IAAI5B,EAAOG,EAAkByB,GAC7BJ,EAAUX,KAAK,KAAKb,IACnB,SAAU6B,GACXJ,EAAQZ,KAAK,KAAKgB,KCgBdQ,CATKH,EAEAjB,SAFAiB,EAEShB,SACA,SAAClB,GACXiC,EAAK9D,MAAMmE,SAASzB,KAAK,KAAKb,IAEtB,SAAC6B,GACTG,MAAMH,4CAIChD,EAAID,GACf,IAAI2D,EAAYC,KAAKC,MAAMD,KAAKE,UAAUhF,KAAKoD,QAC/CyB,EAAUvB,SAASnC,GAAOD,EAAEwC,OAAOlD,MACnCR,KAAKyD,SAASoB,oCAGd,IAAII,EAAc7E,EAAAC,EAAAC,cAAA,QAAMiB,UAAU,SAASH,SAAUpB,KAAK2E,OAAO9D,KAAKb,OAClEI,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,OACXnB,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,OAAOC,MAAOR,KAAKoD,MAAME,SAASC,SAC9CzC,SAAUd,KAAKkF,eAAerE,KAAKb,KAAK,eAE5CI,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,OACXnB,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,WAAWC,MAAOR,KAAKoD,MAAME,SAASE,SAClD1C,SAAUd,KAAKkF,eAAerE,KAAKb,KAAK,eAE5CI,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,eACXnB,EAAAC,EAAAC,cAAA,UAAQC,KAAK,UAAb,kBAIJ4E,EAAc/E,EAAAC,EAAAC,cAAA,QAAMiB,UAAU,SAASH,SAAUpB,KAAKoE,OAAOvD,KAAKb,OAClEI,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,OACXnB,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,OAAOC,MAAOR,KAAKoD,MAAME,SAASC,SAC9CzC,SAAUd,KAAKkF,eAAerE,KAAKb,KAAK,eAE5CI,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,OACXnB,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,WAAWC,MAAOR,KAAKoD,MAAME,SAASE,SAClD1C,SAAUd,KAAKkF,eAAerE,KAAKb,KAAK,eAE5CI,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,eACXnB,EAAAC,EAAAC,cAAA,UAAQC,KAAK,UAAb,kBAIR,OACIH,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,qBACXnB,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,cACXnB,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,aAAOF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,QAAQC,MAAM,SAC7BgB,QAAiC,WAAxBxB,KAAKoD,MAAMC,SACpBvC,SAAUd,KAAK2B,OAAOd,KAAKb,QAF/B,gBAGAI,EAAAC,EAAAC,cAAA,aAAOF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,QAAQC,MAAM,SAC7BgB,QAAiC,WAAxBxB,KAAKoD,MAAMC,SACpBvC,SAAUd,KAAK2B,OAAOd,KAAKb,QAF/B,iBAIJI,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,eACc,WAAxBvB,KAAKoD,MAAMC,SAAwB8B,EAAaF,YAxFhD5D,aCKnB+D,cACF,SAAAA,IAAc,IAAAjF,EAAA,OAAAwC,OAAAK,EAAA,EAAAL,CAAA3C,KAAAoF,IACVjF,EAAAwC,OAAAM,EAAA,EAAAN,CAAA3C,KAAA2C,OAAAO,EAAA,EAAAP,CAAAyC,GAAAjC,KAAAnD,QACKoD,MAAQ,CACTd,KAAKD,GAAgB,GACrBgD,QAAS,GACTC,SAAU,IALJnF,sHAUL,IAAAwD,EAAA3D,KACDuF,EAAQvF,KAAKoD,MAAMkC,SACtBE,OAAO,SAACC,GAAD,OAASA,EAAKC,UACrBC,IAAI,SAACF,EAAMG,GACR,OAAOxF,EAAAC,EAAAC,cAACuF,EAAD,CAAUpE,KAAMgE,EAAMtE,IAAKyE,EAClC7D,SAAU4B,EAAKhC,OAAOd,KAAK8C,GAC3B3B,SAAU2B,EAAK7B,OAAOjB,KAAK8C,OAE/B,OACIvD,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,OACXnB,EAAAC,EAAAC,cAAA,UAAKN,KAAKoD,MAAMd,KAAKiB,UAAU,GAA/B,SACAnD,EAAAC,EAAAC,cAAA,OAAKiB,UAAU,gBACfnB,EAAAC,EAAAC,cAACwF,EAAD,CAAWpF,QAASV,KAAKoD,MAAMiC,QAC/BjE,SAAUpB,KAAK+F,QAAQlF,KAAKb,MAC5Bc,SAAWd,KAAKe,YAAYF,KAAKb,SAEjCI,EAAAC,EAAAC,cAAA,UACKiF,GAEJvF,KAAKoD,MAAMd,KAAKO,GAAG,KAAKzC,EAAAC,EAAAC,cAAC0F,EAAD,CACzBpB,SAAU5E,KAAK4E,SAAS/D,KAAKb,MAC7BqE,SAAUrE,KAAKqE,SAASxD,KAAKb,0CAIhCsC,GAIL,IAAIuC,EAAYC,KAAKC,MAAMD,KAAKE,UAAUhF,KAAKoD,QAC/CyB,EAAUvC,KAAOA,EACjBtC,KAAKyD,SAASoB,oCAETvC,GACL,IAAIuC,EAAYC,KAAKC,MAAMD,KAAKE,UAAUhF,KAAKoD,QAC/CyB,EAAUvC,KAAOA,EACjBtC,KAAKyD,SAASoB,kCAEXoB,EAAMxE,GACTA,EAAKiE,SAAU,EACf1F,KAAKyD,SAASzD,KAAKoD,sCAEhBlC,EAAEO,GACLA,EAAKC,OAAuB,cAAdD,EAAKC,OAAqB,GAAG,YAC3C1B,KAAKyD,SAASzD,KAAKoD,uCAEf6C,GACJ,IAAIX,EAAWtF,KAAKoD,MAAMkC,SAC1BA,EAASY,KAAK,CACVrD,GAoBRA,GAAM,EAnBEjB,MAAMqE,EAAMvC,OAAOlD,MACnBkB,OAAO,KACPgE,SAAQ,IAEZ1F,KAAKyD,SAAS,CACV4B,QAAQ,GACRC,SAASA,IAEba,QAAQC,IAAId,EAASA,EAASe,OAAO,GAAGzE,2CAEhCqE,GACRjG,KAAKyD,SAAS,CACV4B,QAAQY,EAAMvC,OAAOlD,MACrB8E,SAAStF,KAAKoD,MAAMkC,kBA1EdjE,aA8EdwB,EAAK,EAMMuC,QCxFfkB,IAASC,OACPnG,EAAAC,EAAAC,cAACkG,EAAD,MACAC,SAASC,eAAe","file":"static/js/main.93940493.chunk.js","sourcesContent":["import React,{Component} from 'react'\n\nclass TodoInput extends Component{\n    componentDidMount(){\n        this.input.focus()\n    }\n    componentDidUpdate(){\n        this.input.focus()\n    }\n    render(){\n        return(\n            <input type='text' value={this.props.content}\n            onKeyPress={this.submit.bind(this)}\n            onChange={this.changeTitle.bind(this)}\n            ref={(input)=>{this.input = input}}\n            placeholder='在此输入'/>\n        )\n    }\n    submit(e){\n        if(e.key ==='Enter'){\n            this.props.onSubmit(e)       \n        }\n    }\n    changeTitle(e){\n        this.props.onChange(e)\n    }\n}\n\nexport default TodoInput","import React, { Component } from 'react'\n\nclass TodoItem extends Component {\n    render() {\n        return (\n            <div className=\"itemWrapper\">\n                <input type=\"checkbox\" \n                checked={this.props.todo.status === 'completed'}\n                    onChange={this.toggle.bind(this)} />\n                <span>{this.props.todo.title}</span>\n                <button onClick={this.delete.bind(this)}>删除</button>\n            </div>\n        )\n    }\n    toggle(e){\n        this.props.onToggle(e,this.props.todo)\n    }\n    delete(e){\n        this.props.onDelete(e,this.props.todo)\n    }\n}\n\nexport default TodoItem\n","import AV from 'leancloud-storage'\r\n\r\nvar APP_ID = 'rrfsGl7WT9nC6eSI9EsKgf98-gzGzoHsz';\r\nvar APP_KEY = 'zoP5Iwsm3ugh9FwLRhweO8jq';\r\n\r\nAV.init({\r\n  appId: APP_ID,\r\n  appKey: APP_KEY\r\n});\r\n\r\nexport default AV\r\nexport function signUp(username,password,successFn,errorFn){\r\n  // 新建 AVUser 对象实例\r\n  var user = new AV.User();\r\n  // 设置用户名\r\n  user.setUsername(username);\r\n  // 设置密码\r\n  user.setPassword(password);\r\n  // 设置邮箱\r\n  // user.setEmail('tom@leancloud.cn');\r\n  user.signUp().then(function (loggedInUser) {\r\n    let user = getUserFormAVUser(loggedInUser)\r\n    successFn.call(null,user)\r\n  }, function (error) {\r\n    errorFn.call(null,error)\r\n  });\r\n  return undefined\r\n}\r\nexport function signIn(username,password,successFn,errorFn){\r\n  AV.User.logIn(username, password).then(function (loggedInUser) {\r\n    let user = getUserFormAVUser(loggedInUser)\r\n    successFn.call(null,user)\r\n  }, function (error) {\r\n    errorFn.call(null,error)\r\n  });\r\n}\r\n\r\nexport function getCurrentUser(){\r\n  let user = AV.User.current()\r\n  if(user){\r\n    return getUserFormAVUser(user)\r\n  }else{\r\n    return null\r\n  }\r\n}\r\n\r\nfunction getUserFormAVUser(AVUser){\r\n  return {\r\n    id : AVUser.id,\r\n    ...AVUser.attributes\r\n\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport './UserDialog.css'\r\nimport {signUp,signIn} from './leanCloud'\r\n\r\nclass UserDialog extends Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            selected: 'signUp',\r\n            formData:{\r\n                username:'',\r\n                password:''\r\n            }\r\n        }\r\n    }\r\n    toggle(e) {\r\n        this.setState({\r\n            selected: e.target.value\r\n        })\r\n    }\r\n    signIn(e){\r\n        e.preventDefault()\r\n        let {username,password} = this.state.formData\r\n        let success = (user)=>{\r\n            this.props.onSignIn.call(null,user)\r\n        }\r\n        let error = (error)=>{\r\n            alert(error)\r\n        }\r\n        signIn(username,password,success,error)\r\n    }\r\n    signUp(e){\r\n        e.preventDefault()\r\n        let {username,password} = this.state.formData\r\n        let success = (user)=>{\r\n            this.props.onSignUp.call(null,user)\r\n        }\r\n        let error = (error)=>{\r\n            alert(error)\r\n        }\r\n        signUp(username,password,success,error)\r\n    }\r\n    changeFormData(key,e){\r\n        let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n        stateCopy.formData[key] = e.target.value\r\n        this.setState(stateCopy)\r\n    }\r\n    render() {\r\n        let signUpForm = (<form className='signUp' onSubmit={this.signUp.bind(this)}>\r\n            <div className=\"row\">\r\n                <label>用户名</label>\r\n                <input type=\"text\" value={this.state.formData.username}\r\n                onChange={this.changeFormData.bind(this,'username')}/>\r\n            </div>\r\n            <div className=\"row\">\r\n                <label>密码</label>\r\n                <input type=\"password\" value={this.state.formData.password}\r\n                onChange={this.changeFormData.bind(this,'password')}/>\r\n            </div>\r\n            <div className=\"row actions\">\r\n                <button type='submit'>注册</button>\r\n            </div>\r\n        </form>)\r\n\r\n        let signInForm = (<form className='signIn' onSubmit={this.signIn.bind(this)}>\r\n            <div className=\"row\">\r\n                <label>用户名</label>\r\n                <input type=\"text\" value={this.state.formData.username}\r\n                onChange={this.changeFormData.bind(this,'username')}/>\r\n            </div>\r\n            <div className=\"row\">\r\n                <label>密码</label>\r\n                <input type=\"password\" value={this.state.formData.password}\r\n                onChange={this.changeFormData.bind(this,'password')}/>\r\n            </div>\r\n            <div className=\"row actions\">\r\n                <button type='submit'>登录</button>\r\n            </div>\r\n        </form>)\r\n\r\n        return (\r\n            <div className=\"UserDialogWrapper\">\r\n                <div className=\"UserDialog\">\r\n                    <nav>\r\n                        <label><input type=\"radio\" value=\"signUp\"\r\n                            checked={this.state.selected === 'signUp'}  \r\n                            onChange={this.toggle.bind(this)}/>注册</label>\r\n                        <label><input type=\"radio\" value=\"signIn\"\r\n                            checked={this.state.selected === 'signIn'} \r\n                            onChange={this.toggle.bind(this)}/>登录</label>\r\n                    </nav>\r\n                    <div className=\"formWrapper\">\r\n                        {this.state.selected === 'signIn' ? signInForm : signUpForm}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default UserDialog","import React, { Component } from 'react'\nimport './App.css'\nimport 'normalize.css'\nimport './reset.css'\nimport TodoInput from './TodoInput'\nimport TodoItem from './TodoItem'\nimport UserDialog from './UserDialog'\nimport {getCurrentUser} from './leanCloud';\n\nclass App extends Component {\n    constructor() {\n        super()\n        this.state = {\n            user:getCurrentUser||{},\n            newTodo: '',\n            todoList: []\n        }\n    }\n    componentDidUpdate(){\n    }\n    render() {\n        let todos = this.state.todoList\n        .filter((item)=>!item.deleted)\n        .map((item, index) => {\n            return <TodoItem todo={item} key={index}\n            onToggle={this.toggle.bind(this)}\n            onDelete={this.delete.bind(this)}/>\n        })\n        return (\n            <div className='App'>\n                <h1>{this.state.user.username||''}Todos</h1>\n                <div className=\"inputWrapper\">\n                <TodoInput content={this.state.newTodo}\n                onSubmit={this.addTodo.bind(this)}\n                onChange={(this.changeTitle.bind(this))}/>\n                </div>\n                <ol>\n                    {todos}\n                </ol>\n                {this.state.user.id?null:<UserDialog \n                onSignUp={this.onSignUp.bind(this)}\n                onSignIn={this.onSignIn.bind(this)}/>}\n            </div>\n        )\n    }\n    onSignUp(user){\n        // this.state.user = user\n        // this.setState(this.state)\n        //直接修改会报错\n        let stateCopy = JSON.parse(JSON.stringify(this.state))\n        stateCopy.user = user\n        this.setState(stateCopy)\n    }\n    onSignIn(user){\n        let stateCopy = JSON.parse(JSON.stringify(this.state))\n        stateCopy.user = user\n        this.setState(stateCopy)\n    }\n    delete(event,todo){\n        todo.deleted = true\n        this.setState(this.state)\n    }\n    toggle(e,todo){\n        todo.status = todo.status==='completed'?'':'completed'\n        this.setState(this.state)\n    }\n    addTodo(event){\n        let todoList = this.state.todoList\n        todoList.push({\n            id:idMaker(),\n            title:event.target.value,\n            status:null,\n            deleted:false\n        })\n        this.setState({\n            newTodo:'',\n            todoList:todoList\n        })\n        console.log(todoList[todoList.length-1].title)\n    }\n    changeTitle(event){\n        this.setState({\n            newTodo:event.target.value,\n            todoList:this.state.todoList\n        })\n    }\n}\nlet id = 0\nfunction idMaker(){\n    id += 1\n    return id\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}